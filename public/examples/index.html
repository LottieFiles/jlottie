<html>
    <head>
        <script src="/jlottie/jlottie.min.js" type="text/javascript"></script>
        <link rel="stylesheet" href="./style.css" />
    </head>

    <body>
        <div class="container lf-padding mx-auto py-16 md:py-18">
            <div class="w-full mx-auto text-center">
                <a href="https://github.com/LottieFiles/jlottie" target="_blank">
                    <button class="bg-black rounded-lg px-3 py-2 mx-auto mb-4">
                        <img src="https://lottiefiles.com/images/svg/github.svg" class="mx-auto" />
                    </button>
                </a>

                <h1 class="font-lf-bold text-6xl text-center">jlottie Player</h1>
                <h2 class="font-normal font-lf-regular md:text-2xl text-center py-4 pb-10 leading-normal text-lf-grey">
                    High performance, lightweight Lottie player
                </h2>
                <div>
                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-6
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        jlottie has been engineered to address the performance and bulkiness issues of existing Lottie
                        players for the web. jlottie also guarantees that no frames are dropped in a Lottie animation
                        during playback, no matter how old the host hardware is.
                    </h2>

                    <h2 class="font-bold font-lf-regular md:text-2xl text-center py-4 pb-2 leading-normal text-lf-grey">
                        Performance
                    </h2>

                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-6
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        jlottie's performance is achieved by compiling the Lottie source into a scene graph, which is
                        subsequently used to play the animation. This forgoes any need to perform real-time computations
                        during playback. The compilation process also optimizes the sequencing of all the
                        transformations that make up a Lottie animation.
                    </h2>
                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-6
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        For animations of average complexity, jlottie consumes as little as half the CPU resources as
                        the current Lottie web player. As complexity increases, this efficiency also increases.
                    </h2>
                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-6
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        jlottie and the current web Lottie player were stress tested using 35 simultaneously playing
                        animations, the features of which were fully supported by jlottie. The 
                        <b><a href='https://lottiefiles.github.io/jlottie/examples/general_jlottie2.html'>jlottie test</a></b> 
                        hit an Intel i7-7700K processor for an average of 25% processing power with a maximum memory
                        consumption of 650MB. The same stress test performed using 
                        <b><a href='https://lottiefiles.github.io/jlottie/examples/general_lottie2.html'> the current web Lottie player</a></b>, 
                        on the same computer and browser, averaged 32% CPU demand with a maximum memroy cost of
                        1,400MB. Of considerable note was the jittering of the animations played by the current 
                        web Lottie player as opposed to jlottie.
                    </h2>

                    <h2 class="font-bold font-lf-regular md:text-2xl text-center py-4 pb-2 leading-normal text-lf-grey">
                        Program file size
                    </h2>

                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-6
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        The most recent version of jlottie is over 80% smaller than the vanilla version of the current
                        Lottie player for the web. This reduction is achieved primarily through the use of polymorphic
                        functions applied across congruent data sets that are used for various purposes. Even when
                        jlottie reaches 90+% of feature parity with the current Lottie web player, its size is expected
                        to be less than half that of its alternatives.
                    </h2>
                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-6
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        The minified size of jlottie is 36KB, and its gzipped version is 9KB. The web Lottie player is
                        210KB when minified and 54KB gzipped.
                    </h2>

                    <h2 class="font-bold font-lf-regular md:text-2xl text-center py-4 pb-2 leading-normal text-lf-grey">
                        Guaranteed frame rendering
                    </h2>

                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-6
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        One of the problems with the current Lottie web player is that it skips frames when the host
                        computer or device cannot meet the processing throughput. Animations playing on this player
                        starts visibly tearing when 20 or more averagely complex Lottie animations are loaded
                        simultaneously.
                    </h2>
                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-4
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        Conversely, jlottie never drops a frame during playback, no matter how many Lottie animations
                        are loaded. This means that the CPU demand is proportionate to the number Lottie animations
                        playing simultaneously. Even so, with 20 concurrent Lottie animations loaded on an average
                        computer, jlottie manages to outperform the current web Lottie player whilst maintaining frame
                        rates and avoiding jitter. This phenomenon can be tested by visiting the following links:
                    </h2>

                    <h2
                        class="
                            font-bold font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-2
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        <a href="general_jlottie2.html" class="text-lf-teal">Stress test for jlottie</a>
                    </h2>
                    <h2
                        class="
                            font-bold font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-20
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        <a href="general_lottie2.html" class="text-lf-teal"
                            >Stress test for existing web Lottie player</a
                        >
                    </h2>
                    <h2 class="font-bold font-lf-regular md:text-2xl text-center py-4 pb-2 leading-normal text-lf-grey">
                        Play a Lottie with jlottie:
                    </h2>
                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-4
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        You can use the input box below to enter URLs pointing to Lottie JSON files. The animation will
                        start playing as soon as the input box changes to a valid JSON file URL.
                    </h2>
                    <h2
                        class="
                            font-normal font-lf-regular
                            md:text-xl
                            text-left
                            w-full
                            lg:w-2/3
                            pt-4
                            pb-4
                            leading-normal
                            text-lf-grey-darkest
                            mx-auto
                        "
                    >
                        <i
                            >Please note that not all features of the full Lottie format is currently supported by
                            jlottie. Hence, a lot of animations may not play properly or may break the player, in which
                            case reload the page to try other animations.</i
                        >
                    </h2>
                </div>
            </div>

            <div class="text-center w-full lg:w-2/3 mx-auto">
                <div class="flex flex-col text-left">
                    <label class="font-lf-bold text-grey-darkest py-3">Lottie Json Url: </label>
                    <input
                        id="lottieSrc"
                        placeholder="Load animation"
                        class="
                            search_field
                            trans trans-slow
                            outline-none
                            text-sm
                            transition
                            hover:bg-grey-light
                            focus:bg-lf-teal
                            focus:text-white
                            focus:font-bold
                            bg-purple-white
                            rounded-lg
                            shadow-lg
                            w-full
                            border-0
                            p-3
                            pl-10
                            mx-auto
                        "
                        value=""
                        onkeypress='handle(event)'
                    />
                    <label style="margin-top: 20px" class="font-lf-bold text-grey-darkest py-3"
                        >Lottie Animation:
                    </label>
                    <div class="rounded-lg shadow-lg mx-auto w-full">
                        <div class="w-full">
                            <div id="jlottie-container" class="h-110"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id='stuff' style='height:100px; width:300px; display:block;'></Div>

        <script>
            let windvanes = 'https://assets10.lottiefiles.com/private_files/lf30_3k4nnphs.json';
            let you = 'https://assets5.lottiefiles.com/private_files/lf30_dfgj520b.json';
            let heart = 'https://assets5.lottiefiles.com/private_files/lf30_o6luqzep.json';
            let lightbulb = 'https://assets5.lottiefiles.com/packages/lf20_jJ7Djd.json';
            let pathTrimPencil = "https://assets5.lottiefiles.com/temp/lf20_SEN0V3.json";
            let pathTrim = "https://assets6.lottiefiles.com/packages/lf20_lfre60iw.json";
            let pathTrim2 = "https://assets2.lottiefiles.com/packages/lf20_khdjemdo.json";
            let pathTrim3 = "https://assets2.lottiefiles.com/packages/lf20_sjnfymjq.json";
            let pathTrim4 = "https://assets2.lottiefiles.com/packages/lf20_pc8wusi3.json";
            let pathTrim5 = "https://assets2.lottiefiles.com/packages/lf20_j8eovnox.json";
            let pathTrim6 = "https://assets10.lottiefiles.com/packages/lf20_idyhyxiy.json";
            let defLot = "https://assets3.lottiefiles.com/packages/lf20_rz0hyab1.json";
            let pencil = "https://assets2.lottiefiles.com/packages/lf20_1et9y4wm.json";
            let squid = "https://assets9.lottiefiles.com/packages/lf20_jz1m61i7.json";
            let trimPo = "https://assets8.lottiefiles.com/packages/lf20_j8eovnox.json";

            let lottieinstance;
            function loadLottie(toLoad) {
                lottieinstance = jlottie.loadAnimation({
                    container: document.getElementById('jlottie-container'),
                    //animationData: '',
                    loop: true,
                    autoplay: true,
                    debug: true,
                    debugAnimation: true,
                    debugContainer: document.getElementById('stuff'),
                    path: toLoad,
                });
            }

            function handle(e) {
                if (e.keyCode === 13) {
                    lottieinstance.destroy();
                    loadLottie(document.getElementById('lottieSrc').value);
                }
            }

            // Load an initial animation
            loadLottie(heart);

            document.getElementById('jlottie-container').addEventListener('onLoopComplete', handleEvent);
            function handleEvent(event) {
                //document.getElementById('stuff').innerHTML = event.detail.count;
            }
        </script>
    </body>
</html>
